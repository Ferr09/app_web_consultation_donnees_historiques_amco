{% extends "layout_auth.html" %}

{% block title %}Lier le compte - AMCO{% endblock %}

{% block form_content %}

    <h3 class="form-title">Lier votre compte Microsoft</h3>

    <p class="form-subtitle">
        C'est la première fois que vous vous connectez avec Microsoft.
        Veuillez vous authentifier avec votre compte local pour finaliser la liaison de vos comptes.
    </p>

    <!-- Le formulaire de connexion -->
    <form method="POST" action="{{ url_for('auth.link_account') }}" class="auth-form" novalidate>
        
        {{ form.hidden_tag() }}

        <div class="form-group">
            {{ form.email.label }}
            {{ form.email(class="form-control", placeholder="Entrez votre adresse e-mail") }}
            {% for error in form.email.errors %}
                <span class="error-message">{{ error }}</span>
            {% endfor %}
        </div>

        <div class="form-group">
            {{ form.password.label }}
            {{ form.password(class="form-control", placeholder="Entrez votre mot de passe") }}
            {% for error in form.password.errors %}
                <span class="error-message">{{ error }}</span>
            {% endfor %}
        </div>

        <div class="form-group">
            {{ form.submit(class="btn btn-primary btn-block") }}
        </div>
    </form>

    <!-- ======================================================= -->
    <!-- ==== AJOUT DE LA "SORTIE DE SECOURS" (ESCAPE HATCH) ==== -->
    <!-- ======================================================= -->
    <div class="form-footer-links">
        <p>
            Problèmes pour vous connecter ? 
            <a href="{{ url_for('auth.login') }}">Retour à la page de connexion principale</a>
        </p>
    </div>
    
{% endblock %}